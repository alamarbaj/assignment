<!DOCTYPE html>
<html>

<head>
  <title> </title>
</head>
<style>
  #tag-control {
    display: flex;
    flex-wrap: wrap;
    width: 400px;
    height: 200px;
    border: 1px solid black;
  }

  .tag {
    width: 33.33%;
    height: 33.33%;
    box-sizing: border-box;
    border: 1px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
  }
</style>

<body>
  <div id="tag-control"></div><br />
  <button><a href="/api/get-countries-tags">Refresh</a></button>
  <%if(response.rank.length>0){%>
    <h4>COUNTRY RANKING : <% response.rank.forEach(function(item) { %>
        <li> <i>Country</i> - <%= item.country %> | <i>Rank</i> : <%= item.rank %>
        </li>
        <% }); %>
    </h4>
    <%}else{%>
      <h4>Rank : <%=response.rank.length%>
      </h4>
      <%}%>
</body>
<script>
  let shuffledCountries = '<%=response.countries%>'
  const tagControl = document.getElementById("tag-control");
  for (let i = 0; i < 9; i++) {
    const tag = document.createElement("div");
    tag.className = "tag";
    const countryIndex = i < shuffledCountries.length ? i : Math.floor(Math.random() * shuffledCountries.length);
    console.log("shuffledCountries[countryIndex] : ", shuffledCountries.split(',')[countryIndex])
    tag.innerText = shuffledCountries.split(',')[countryIndex];
    tagControl.appendChild(tag);
  }


</script>

</html>